#=======================================================================
# isa.py
#=======================================================================

from pydgin.misc import create_risc_decoder, FatalError

#=======================================================================
# Instruction Encodings
#=======================================================================

encodings = [
  ['nop',                '000000_00000_00000_00000_00000_000000'],
  ['BEQ',                'xxxxxxxxxxxxxxxxx000xxxxx1100011'],
  ['BNE',                'xxxxxxxxxxxxxxxxx001xxxxx1100011'],
  ['BLT',                'xxxxxxxxxxxxxxxxx100xxxxx1100011'],
  ['BGE',                'xxxxxxxxxxxxxxxxx101xxxxx1100011'],
  ['BLTU',               'xxxxxxxxxxxxxxxxx110xxxxx1100011'],
  ['BGEU',               'xxxxxxxxxxxxxxxxx111xxxxx1100011'],
  ['JALR',               'xxxxxxxxxxxxxxxxx000xxxxx1100111'],
  ['JAL',                'xxxxxxxxxxxxxxxxxxxxxxxxx1101111'],
  ['LUI',                'xxxxxxxxxxxxxxxxxxxxxxxxx0110111'],
  ['AUIPC',              'xxxxxxxxxxxxxxxxxxxxxxxxx0010111'],
  ['ADDI',               'xxxxxxxxxxxxxxxxx000xxxxx0010011'],
  ['SLLI',               '000000xxxxxxxxxxx001xxxxx0010011'],
  ['SLTI',               'xxxxxxxxxxxxxxxxx010xxxxx0010011'],
  ['SLTIU',              'xxxxxxxxxxxxxxxxx011xxxxx0010011'],
  ['XORI',               'xxxxxxxxxxxxxxxxx100xxxxx0010011'],
  ['SRLI',               '000000xxxxxxxxxxx101xxxxx0010011'],
  ['SRAI',               '010000xxxxxxxxxxx101xxxxx0010011'],
  ['ORI',                'xxxxxxxxxxxxxxxxx110xxxxx0010011'],
  ['ANDI',               'xxxxxxxxxxxxxxxxx111xxxxx0010011'],
  ['ADD',                '0000000xxxxxxxxxx000xxxxx0110011'],
  ['SUB',                '0100000xxxxxxxxxx000xxxxx0110011'],
  ['SLL',                '0000000xxxxxxxxxx001xxxxx0110011'],
  ['SLT',                '0000000xxxxxxxxxx010xxxxx0110011'],
  ['SLTU',               '0000000xxxxxxxxxx011xxxxx0110011'],
  ['XOR',                '0000000xxxxxxxxxx100xxxxx0110011'],
  ['SRL',                '0000000xxxxxxxxxx101xxxxx0110011'],
  ['SRA',                '0100000xxxxxxxxxx101xxxxx0110011'],
  ['OR',                 '0000000xxxxxxxxxx110xxxxx0110011'],
  ['AND',                '0000000xxxxxxxxxx111xxxxx0110011'],
  ['ADDIW',              'xxxxxxxxxxxxxxxxx000xxxxx0011011'],
  ['SLLIW',              '0000000xxxxxxxxxx001xxxxx0011011'],
  ['SRLIW',              '0000000xxxxxxxxxx101xxxxx0011011'],
  ['SRAIW',              '0100000xxxxxxxxxx101xxxxx0011011'],
  ['ADDW',               '0000000xxxxxxxxxx000xxxxx0111011'],
  ['SUBW',               '0100000xxxxxxxxxx000xxxxx0111011'],
  ['SLLW',               '0000000xxxxxxxxxx001xxxxx0111011'],
  ['SRLW',               '0000000xxxxxxxxxx101xxxxx0111011'],
  ['SRAW',               '0100000xxxxxxxxxx101xxxxx0111011'],
  ['LB',                 'xxxxxxxxxxxxxxxxx000xxxxx0000011'],
  ['LH',                 'xxxxxxxxxxxxxxxxx001xxxxx0000011'],
  ['LW',                 'xxxxxxxxxxxxxxxxx010xxxxx0000011'],
  ['LD',                 'xxxxxxxxxxxxxxxxx011xxxxx0000011'],
  ['LBU',                'xxxxxxxxxxxxxxxxx100xxxxx0000011'],
  ['LHU',                'xxxxxxxxxxxxxxxxx101xxxxx0000011'],
  ['LWU',                'xxxxxxxxxxxxxxxxx110xxxxx0000011'],
  ['SB',                 'xxxxxxxxxxxxxxxxx000xxxxx0100011'],
  ['SH',                 'xxxxxxxxxxxxxxxxx001xxxxx0100011'],
  ['SW',                 'xxxxxxxxxxxxxxxxx010xxxxx0100011'],
  ['SD',                 'xxxxxxxxxxxxxxxxx011xxxxx0100011'],
  ['FENCE',              'xxxxxxxxxxxxxxxxx000xxxxx0001111'],
  ['FENCE_I',            'xxxxxxxxxxxxxxxxx001xxxxx0001111'],
  ['MUL',                '0000001xxxxxxxxxx000xxxxx0110011'],
  ['MULH',               '0000001xxxxxxxxxx001xxxxx0110011'],
  ['MULHSU',             '0000001xxxxxxxxxx010xxxxx0110011'],
  ['MULHU',              '0000001xxxxxxxxxx011xxxxx0110011'],
  ['DIV',                '0000001xxxxxxxxxx100xxxxx0110011'],
  ['DIVU',               '0000001xxxxxxxxxx101xxxxx0110011'],
  ['REM',                '0000001xxxxxxxxxx110xxxxx0110011'],
  ['REMU',               '0000001xxxxxxxxxx111xxxxx0110011'],
  ['MULW',               '0000001xxxxxxxxxx000xxxxx0111011'],
  ['DIVW',               '0000001xxxxxxxxxx100xxxxx0111011'],
  ['DIVUW',              '0000001xxxxxxxxxx101xxxxx0111011'],
  ['REMW',               '0000001xxxxxxxxxx110xxxxx0111011'],
  ['REMUW',              '0000001xxxxxxxxxx111xxxxx0111011'],
  ['AMOADD_W',           '00000xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOXOR_W',           '00100xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOOR_W',            '01000xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOAND_W',           '01100xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOMIN_W',           '10000xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOMAX_W',           '10100xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOMINU_W',          '11000xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOMAXU_W',          '11100xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOSWAP_W',          '00001xxxxxxxxxxxx010xxxxx0101111'],
  ['LR_W',               '00010xx00000xxxxx010xxxxx0101111'],
  ['SC_W',               '00011xxxxxxxxxxxx010xxxxx0101111'],
  ['AMOADD_D',           '00000xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOXOR_D',           '00100xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOOR_D',            '01000xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOAND_D',           '01100xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOMIN_D',           '10000xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOMAX_D',           '10100xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOMINU_D',          '11000xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOMAXU_D',          '11100xxxxxxxxxxxx011xxxxx0101111'],
  ['AMOSWAP_D',          '00001xxxxxxxxxxxx011xxxxx0101111'],
  ['LR_D',               '00010xx00000xxxxx011xxxxx0101111'],
  ['SC_D',               '00011xxxxxxxxxxxx011xxxxx0101111'],
  ['SCALL',              '00000000000000000000000001110011'],
  ['SBREAK',             '00000000000100000000000001110011'],
  ['SRET',               '00010000000000000000000001110011'],
  ['SFENCE_VM',          '000100000001xxxxx000000001110011'],
  ['WFI',                '00010000001000000000000001110011'],
  ['MRTH',               '00110000011000000000000001110011'],
  ['MRTS',               '00110000010100000000000001110011'],
  ['HRTS',               '00100000010100000000000001110011'],
  ['CSRRW',              'xxxxxxxxxxxxxxxxx001xxxxx1110011'],
  ['CSRRS',              'xxxxxxxxxxxxxxxxx010xxxxx1110011'],
  ['CSRRC',              'xxxxxxxxxxxxxxxxx011xxxxx1110011'],
  ['CSRRWI',             'xxxxxxxxxxxxxxxxx101xxxxx1110011'],
  ['CSRRSI',             'xxxxxxxxxxxxxxxxx110xxxxx1110011'],
  ['CSRRCI',             'xxxxxxxxxxxxxxxxx111xxxxx1110011'],
  ['FADD_S',             '0000000xxxxxxxxxxxxxxxxxx1010011'],
  ['FSUB_S',             '0000100xxxxxxxxxxxxxxxxxx1010011'],
  ['FMUL_S',             '0001000xxxxxxxxxxxxxxxxxx1010011'],
  ['FDIV_S',             '0001100xxxxxxxxxxxxxxxxxx1010011'],
  ['FSGNJ_S',            '0010000xxxxxxxxxx000xxxxx1010011'],
  ['FSGNJN_S',           '0010000xxxxxxxxxx001xxxxx1010011'],
  ['FSGNJX_S',           '0010000xxxxxxxxxx010xxxxx1010011'],
  ['FMIN_S',             '0010100xxxxxxxxxx000xxxxx1010011'],
  ['FMAX_S',             '0010100xxxxxxxxxx001xxxxx1010011'],
  ['FSQRT_S',            '010110000000xxxxxxxxxxxxx1010011'],
  ['FADD_D',             '0000001xxxxxxxxxxxxxxxxxx1010011'],
  ['FSUB_D',             '0000101xxxxxxxxxxxxxxxxxx1010011'],
  ['FMUL_D',             '0001001xxxxxxxxxxxxxxxxxx1010011'],
  ['FDIV_D',             '0001101xxxxxxxxxxxxxxxxxx1010011'],
  ['FSGNJ_D',            '0010001xxxxxxxxxx000xxxxx1010011'],
  ['FSGNJN_D',           '0010001xxxxxxxxxx001xxxxx1010011'],
  ['FSGNJX_D',           '0010001xxxxxxxxxx010xxxxx1010011'],
  ['FMIN_D',             '0010101xxxxxxxxxx000xxxxx1010011'],
  ['FMAX_D',             '0010101xxxxxxxxxx001xxxxx1010011'],
  ['FCVT_S_D',           '010000000001xxxxxxxxxxxxx1010011'],
  ['FCVT_D_S',           '010000100000xxxxxxxxxxxxx1010011'],
  ['FSQRT_D',            '010110100000xxxxxxxxxxxxx1010011'],
  ['FLE_S',              '1010000xxxxxxxxxx000xxxxx1010011'],
  ['FLT_S',              '1010000xxxxxxxxxx001xxxxx1010011'],
  ['FEQ_S',              '1010000xxxxxxxxxx010xxxxx1010011'],
  ['FLE_D',              '1010001xxxxxxxxxx000xxxxx1010011'],
  ['FLT_D',              '1010001xxxxxxxxxx001xxxxx1010011'],
  ['FEQ_D',              '1010001xxxxxxxxxx010xxxxx1010011'],
  ['FCVT_W_S',           '110000000000xxxxxxxxxxxxx1010011'],
  ['FCVT_WU_S',          '110000000001xxxxxxxxxxxxx1010011'],
  ['FCVT_L_S',           '110000000010xxxxxxxxxxxxx1010011'],
  ['FCVT_LU_S',          '110000000011xxxxxxxxxxxxx1010011'],
  ['FMV_X_S',            '111000000000xxxxx000xxxxx1010011'],
  ['FCLASS_S',           '111000000000xxxxx001xxxxx1010011'],
  ['FCVT_W_D',           '110000100000xxxxxxxxxxxxx1010011'],
  ['FCVT_WU_D',          '110000100001xxxxxxxxxxxxx1010011'],
  ['FCVT_L_D',           '110000100010xxxxxxxxxxxxx1010011'],
  ['FCVT_LU_D',          '110000100011xxxxxxxxxxxxx1010011'],
  ['FMV_X_D',            '111000100000xxxxx000xxxxx1010011'],
  ['FCLASS_D',           '111000100000xxxxx001xxxxx1010011'],
  ['FCVT_S_W',           '110100000000xxxxxxxxxxxxx1010011'],
  ['FCVT_S_WU',          '110100000001xxxxxxxxxxxxx1010011'],
  ['FCVT_S_L',           '110100000010xxxxxxxxxxxxx1010011'],
  ['FCVT_S_LU',          '110100000011xxxxxxxxxxxxx1010011'],
  ['FMV_S_X',            '111100000000xxxxx000xxxxx1010011'],
  ['FCVT_D_W',           '110100100000xxxxxxxxxxxxx1010011'],
  ['FCVT_D_WU',          '110100100001xxxxxxxxxxxxx1010011'],
  ['FCVT_D_L',           '110100100010xxxxxxxxxxxxx1010011'],
  ['FCVT_D_LU',          '110100100011xxxxxxxxxxxxx1010011'],
  ['FMV_D_X',            '111100100000xxxxx000xxxxx1010011'],
  ['FLW',                'xxxxxxxxxxxxxxxxx010xxxxx0000111'],
  ['FLD',                'xxxxxxxxxxxxxxxxx011xxxxx0000111'],
  ['FSW',                'xxxxxxxxxxxxxxxxx010xxxxx0100111'],
  ['FSD',                'xxxxxxxxxxxxxxxxx011xxxxx0100111'],
  ['FMADD_S',            'xxxxx00xxxxxxxxxxxxxxxxxx1000011'],
  ['FMSUB_S',            'xxxxx00xxxxxxxxxxxxxxxxxx1000111'],
  ['FNMSUB_S',           'xxxxx00xxxxxxxxxxxxxxxxxx1001011'],
  ['FNMADD_S',           'xxxxx00xxxxxxxxxxxxxxxxxx1001111'],
  ['FMADD_D',            'xxxxx01xxxxxxxxxxxxxxxxxx1000011'],
  ['FMSUB_D',            'xxxxx01xxxxxxxxxxxxxxxxxx1000111'],
  ['FNMSUB_D',           'xxxxx01xxxxxxxxxxxxxxxxxx1001011'],
  ['FNMADD_D',           'xxxxx01xxxxxxxxxxxxxxxxxx1001111'],
  ['CUSTOM0',            'xxxxxxxxxxxxxxxxx000xxxxx0001011'],
  ['CUSTOM0_RS1',        'xxxxxxxxxxxxxxxxx010xxxxx0001011'],
  ['CUSTOM0_RS1_RS2',    'xxxxxxxxxxxxxxxxx011xxxxx0001011'],
  ['CUSTOM0_RD',         'xxxxxxxxxxxxxxxxx100xxxxx0001011'],
  ['CUSTOM0_RD_RS1',     'xxxxxxxxxxxxxxxxx110xxxxx0001011'],
  ['CUSTOM0_RD_RS1_RS2', 'xxxxxxxxxxxxxxxxx111xxxxx0001011'],
  ['CUSTOM1',            'xxxxxxxxxxxxxxxxx000xxxxx0101011'],
  ['CUSTOM1_RS1',        'xxxxxxxxxxxxxxxxx010xxxxx0101011'],
  ['CUSTOM1_RS1_RS2',    'xxxxxxxxxxxxxxxxx011xxxxx0101011'],
  ['CUSTOM1_RD',         'xxxxxxxxxxxxxxxxx100xxxxx0101011'],
  ['CUSTOM1_RD_RS1',     'xxxxxxxxxxxxxxxxx110xxxxx0101011'],
  ['CUSTOM1_RD_RS1_RS2', 'xxxxxxxxxxxxxxxxx111xxxxx0101011'],
  ['CUSTOM2',            'xxxxxxxxxxxxxxxxx000xxxxx1011011'],
  ['CUSTOM2_RS1',        'xxxxxxxxxxxxxxxxx010xxxxx1011011'],
  ['CUSTOM2_RS1_RS2',    'xxxxxxxxxxxxxxxxx011xxxxx1011011'],
  ['CUSTOM2_RD',         'xxxxxxxxxxxxxxxxx100xxxxx1011011'],
  ['CUSTOM2_RD_RS1',     'xxxxxxxxxxxxxxxxx110xxxxx1011011'],
  ['CUSTOM2_RD_RS1_RS2', 'xxxxxxxxxxxxxxxxx111xxxxx1011011'],
  ['CUSTOM3',            'xxxxxxxxxxxxxxxxx000xxxxx1111011'],
  ['CUSTOM3_RS1',        'xxxxxxxxxxxxxxxxx010xxxxx1111011'],
  ['CUSTOM3_RS1_RS2',    'xxxxxxxxxxxxxxxxx011xxxxx1111011'],
  ['CUSTOM3_RD',         'xxxxxxxxxxxxxxxxx100xxxxx1111011'],
  ['CUSTOM3_RD_RS1',     'xxxxxxxxxxxxxxxxx110xxxxx1111011'],
  ['CUSTOM3_RD_RS1_RS2', 'xxxxxxxxxxxxxxxxx111xxxxx1111011'],
]

#=======================================================================
# Instruction Definitions
#=======================================================================

#-----------------------------------------------------------------------
# nop
#-----------------------------------------------------------------------
def execute_nop( s, inst ):
  s.pc += 4

#=======================================================================
# Create Decoder
#=======================================================================

decode = create_risc_decoder( encodings, globals(), debug=True )


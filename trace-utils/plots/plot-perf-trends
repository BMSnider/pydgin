#!/usr/bin/env python
#=========================================================================
# plot-perf-trends
#=========================================================================
#
#  -h --help          Display this message
#
# Author : Shreesha Srinath
# Date   : March 19th, 2018
#
# data collected from Stanford CPUDB and this link:
# https://github.com/karlrupp/microprocessor-trend-data/blob/master/42yrs/transistors.dat

import argparse
import re
import math
import sys

import pandas as pd
pd.set_option('display.width', 1000)

import brg_plot

#-------------------------------------------------------------------------
# main
#-------------------------------------------------------------------------

if __name__ == "__main__":
 
  # create plot options dict
  opts = brg_plot.PlotOptions()
  attribute_dict = \
  {
    'show'            : False,
    'plot_type'       : 'scatter',
    'figsize'         : (4.0, 4.0),
    'rotate_labels'   : False,
    'markersize'      : 10,
    'labels_fontsize' : 1,
    'legend_enabled'  : False,
  }
  for name, value in attribute_dict.iteritems():
    setattr( opts, name, value )

  data = [
  [1988,  83.5362546958],
  [1989,  50.0286461058],
  [1990,  55.7306040127],
  [1992,  90.5797775943],
  [1992,  177.827941004],
  [1992,  273.841963426],
  [1993,  321.967844425],
  [1993,  239.279917343],
  [1994,  349.115193717],
  [1994,  598.885433492],
  [1995,  1027.35076818],
  [1995,  410.469838044],
  [1996,  922.239565104],
  [1996,  973.377380904],
  [1996,  667.142718041],
  [1996,  1382.37222736],
  [1996,  1810.55824303],
  [1997,  1274.87836177],
  [1997,  1762.35644057],
  [1997,  827.882590628],
  [1997,  1459.02421563],
  [1998,  3554.52235561],
  [1999,  2308.24152676],
  [1999,  1144.4419008],
  [1999,  2713.89943121],
  [1999,  1860.07840181],
  [2000,  3367.78028307],
  [2000,  4782.85814165],
  [2001,  5473.70326288],
  [2001,  6264.33536657],
  [2001,  4293.51021008],
  [2001,  6264.33536657],
  [2002,  9389.79801048],
  [2002,  8659.6432336],
  [2002,  9389.79801048],
  [2003,  10181.5172172],
  [2003,  11341.944035],
  [2003,  13335.2143216],
  [2004,  18938.4202733],
  [2004,  16548.1709994],
  [2004,  21096.9051341],
  [2005,  17000.7761882],
  [2005,  21096.9051341],
  [2006,  18938.4202733],
  [2006,  21096.9051341],
  [2006,  35226.9465147],
  [2007,  23501.4008461],
  [2007,  31622.7766017],
  [2007,  14074.6466334],
  [2008,  20535.2502646],
  [2009,    36600],   
  [2009,    21100],   
  [2009,    37700],   
  [2010,    42000],   
  [2010,    25800],   
  [2011,   46000.7],
  [2011,   39000.4],
  [2011,   33000.6],
  [2012,   31000.8],
  [2012,   59000.0],
  [2012,   33000.7],
  [2013,   59000.6],
  [2014,   59000.9],
  [2014,   66000.4],
  [2014,   65000.4],
  [2014,   66000.1],
  [2016,   73900.2],
  [2017,   77900.2],
  [2017,   83600.3],
  ]

  opts.num_cols          = 1
  opts.num_rows          = 1 
  opts.data              = [data]
  opts.index             = 1
  opts.log_yaxis         = True
  opts.colors            = ['#8aae92'] 
  opts.ylabel            = 'Single-Thread Performance (SPECint)'
  opts.grid_enabled      = False
  
  brg_plot.add_plot( opts )

  ax = opts.fig.gca()
  ax.axvline( x=2004, zorder=1, linewidth=0.5, color='k')
  ax.axvline( x=2012, zorder=1, linewidth=0.5, color='k')

  brg_plot.plt.tight_layout()
  file_name = 'specint.pdf'
  brg_plot.plt.savefig( file_name, bbox_inches="tight" )
